<!DOCTYPE html>
<html lang="zh-CN">

  
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta name="author" content="è‘£æ²…é‘«, yuanxin.me@gmail.com">
  
  
  
  <title>[è½¬]MongoDBå‘½ä»¤è¡Œæ“ä½œ | SHANG Blog</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="mongodb,">
  

  <script>
    console.log('\n%c Hexo-theme-bmw v4.0 ' + '%c ğŸ‰ https://github.com/dongyuanxin/theme-bmw ğŸ‰\n' + '\n%c View demo online ' + '%c ğŸ” https://godbmw.com/ ğŸ”  \n' , 'color: #fadfa3; background: #030307; padding:3px 0;', '', 'color: #fadfa3; background: #030307; padding:3px 0;', '');
  </script>

  
    <meta name="description" content="æ®‡Blog">
  

  

  
    <link rel="icon" href="/images/favicon.ico">
    <link rel="apple-touch-icon" href="/images/touch-icon.png">
  

  <link href="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/icon/iconfont.css">
<link rel="stylesheet" href="/css/github-markdown.css">
<link rel="stylesheet" href="/css/highlight.css">

  <script src="/js/util.js"></script>
<script src="/js/valine.min.js"></script>

  

  
    <link href="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.js" async></script>
  

  
    <link href="https://cdn.bootcss.com/social-share.js/1.0.16/css/share.min.css" rel="stylesheet">
  
  
  <script src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js" async></script>
  
  

</head>

  <body>

    

    <div id="app">

      <div class="header-wrap">
  <header>
    <div class="site-brand">
      <div class="site-title">
        <a href="/">SHANG</a>
      </div>
    </div>
    <nav class="site-navigation">
      <ul class="nav-menu">
      
        <li class="nav-item" data-path="/">
          
            <a href="/" target="_self">
              ä¸»é¡µ
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/archives/">
          
            <a href="/archives/" target="_self">
              å½’æ¡£
            </a>
          
        </li>
      
        <li class="nav-item" data-path="https://github.com/xinshangshangxin">
          
            <a href="https://github.com/xinshangshangxin" target="_self">
              Github
            </a>
          
        </li>
      
      </ul>
    </nav>
    <i class="iconfont icon-menu"></i>
  </header>
</div>

<script>
  let links = document.querySelectorAll('.nav-item');
  for(let link of links){
    let childrenLink = link.querySelector('ul');
    link.addEventListener('mouseenter', () => {
      if(childrenLink) {
        childrenLink.className = "nav-menu--dropdown active";
      }
    })
    link.addEventListener('mouseleave', () => {
      if(childrenLink) {
        childrenLink.className = "nav-menu--dropdown";
      }
    })
  }
  let rootRealPath = getRealPath(window.location.pathname, true);
  for(let link of links) {
    let linkPath = link.getAttribute("data-path");
    if(linkPath && getRealPath(linkPath, true) === rootRealPath) {
      link.className = "nav-item hover";
    }
  }

  let iconMenu = document.querySelector("i.iconfont.icon-menu"),
    iconMenuClicked = false;
  let navDOM = document.querySelector("nav.site-navigation");
  iconMenu.addEventListener("click", () => {
    iconMenuClicked 
      ? navDOM.className = "site-navigation active"
      : navDOM.className = "site-navigation";
    iconMenuClicked = !iconMenuClicked;
  })
</script>

      








<div class="container post-index">

  

<div class="post">
  <h1 class="article-title">
    <span>[è½¬]MongoDBå‘½ä»¤è¡Œæ“ä½œ</span>
  </h1>
  <div class="article-top-meta">
    <span>
      å‘å¸ƒ : 
      2015-08-18
    </span>
    
    
  </div>

  

  <div class="article-content">
    <div class="markdown-body">
      <p></p>
<p>2.1 æŸ¥çœ‹æœåŠ¡å™¨ä¸Šçš„æ•°æ®åº“  </p>
<blockquote>
<p>show dbs  </p>
</blockquote>
<p>2.2 åˆ‡æ¢æ•°æ®åº“<br>åˆ‡æ¢åˆ°tempæ•°æ®åº“(ä»é»˜è®¤çš„testæ•°æ®åº“)  </p>
<blockquote>
<p>use temp  </p>
</blockquote>
<p>2.3 æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰é›†åˆ  </p>
<blockquote>
<p>show collections  </p>
</blockquote>
<p>2.4 åˆ›å»ºæ•°æ®åº“  </p>
<p><strong>mongoä¸­åˆ›å»ºæ•°æ®åº“é‡‡ç”¨çš„ä¹Ÿæ˜¯useå‘½ä»¤ï¼Œå¦‚æœuseåé¢è·Ÿçš„æ•°æ®åº“åä¸å­˜åœ¨ï¼Œé‚£ä¹ˆmongoå°†ä¼šæ–°å»ºè¯¥æ•°æ®åº“ã€‚ä¸è¿‡ï¼Œå®é™…ä¸Šåªæ‰§è¡Œuseå‘½ä»¤åï¼Œmongoæ˜¯ä¸ä¼šæ–°å»ºè¯¥æ•°æ®åº“çš„ï¼Œç›´åˆ°ä½ åƒè¯¥æ•°æ®åº“ä¸­æ’å…¥äº†æ•°æ®</strong></p>
<blockquote>
<p>use test2 </p>
</blockquote>
<p><code>switched to db test2</code></p>
<blockquote>
<p>show dbs  </p>
</blockquote>
<p><code>åˆ°è¿™é‡Œå¹¶æ²¡æœ‰çœ‹åˆ°åˆšæ‰æ–°å»ºçš„test2æ•°æ®åº“</code></p>
<blockquote>
<p>db.hello.insert({â€œnameâ€:â€testdbâ€})</p>
</blockquote>
<p><code>è¯¥æ“ä½œä¼šåœ¨test2æ•°æ®åº“ä¸­æ–°å»ºä¸€ä¸ªhelloé›†åˆï¼Œå¹¶åœ¨å…¶ä¸­æ’å…¥ä¸€æ¡è®°å½•ã€‚</code></p>
<blockquote>
<p>show dbs </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">test    (empty)  </span><br><span class="line">test2   <span class="number">0.203125</span>GB</span><br></pre></td></tr></table></figure>
<blockquote>
<p>show collections  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello  </span><br><span class="line">system.indexes</span><br></pre></td></tr></table></figure>
<p><code>è¿™æ ·ï¼Œä¾¿å¯ä»¥çœ‹åˆ°mongoçš„ç¡®åˆ›å»ºäº†test2æ•°æ®åº“ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªhelloé›†åˆã€‚</code> </p>
<p>2.5 åˆ é™¤æ•°æ®åº“  </p>
<blockquote>
<p>db.dropDatabase()  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"dropped"</span> : <span class="string">"test2"</span>, <span class="string">"ok"</span> : <span class="number">1</span> &#125;</span><br></pre></td></tr></table></figure>
<p>2.6 æŸ¥çœ‹å½“å‰æ•°æ®åº“  </p>
<blockquote>
<p>db   </p>
</blockquote>
<p><code>test2</code><br><code>å¯ä»¥çœ‹å‡ºåˆ é™¤test2æ•°æ®åº“ä¹‹åï¼Œå½“å‰çš„dbè¿˜æ˜¯æŒ‡å‘å®ƒï¼Œåªæœ‰å½“åˆ‡æ¢æ•°æ®åº“ä¹‹åï¼Œtest2æ‰ä¼šå½»åº•æ¶ˆå¤±</code> </p>
<p>3.1 æ–°å»ºcollection  </p>
<blockquote>
<p>db.createCollection(â€œHelloâ€)  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"ok"</span> : <span class="number">1</span> &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>show collections  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hello  </span><br><span class="line">system.indexes  </span><br><span class="line">ä»ä¸Šé¢<span class="number">2.4</span>ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œç›´æ¥å‘ä¸€ä¸ªä¸å­˜åœ¨çš„collectionä¸­æ’å…¥æ•°æ®ä¹Ÿèƒ½åˆ›å»ºä¸€ä¸ªcollectionã€‚</span><br></pre></td></tr></table></figure>
<blockquote>
<p>db.hello2.insert({â€œnameâ€:â€lfqyâ€})<br>show collections   </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hello  </span><br><span class="line">hello2  </span><br><span class="line">system.indexes</span><br></pre></td></tr></table></figure>
<p>3.2 åˆ é™¤collection  </p>
<blockquote>
<p>db.Hello.drop()  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">true</span>  </span><br><span class="line">è¿”å›<span class="literal">true</span>è¯´æ˜åˆ é™¤æˆåŠŸï¼Œ<span class="literal">false</span>è¯´æ˜æ²¡æœ‰åˆ é™¤æˆåŠŸã€‚</span><br></pre></td></tr></table></figure>
<blockquote>
<p>db.hello.drop()  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">false</span>  </span><br><span class="line">ä¸å­˜åœ¨åä¸ºhelloçš„collectionï¼Œå› æ­¤ï¼Œåˆ é™¤å¤±è´¥ã€‚</span><br></pre></td></tr></table></figure>
<p>3.3 é‡å‘½åcollection  </p>
<p><code>å°†hello2é›†åˆé‡å‘½åä¸ºHELLO</code></p>
<blockquote>
<p>show collections  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hello2  </span><br><span class="line">system.indexes</span><br></pre></td></tr></table></figure>
<blockquote>
<p>db.hello2.renameCollection(â€œHELLOâ€)  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"ok"</span> : <span class="number">1</span> &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>show collections  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HELLO  </span><br><span class="line">system.indexes</span><br></pre></td></tr></table></figure>
<p>3.4 æŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­çš„æ‰€æœ‰collection </p>
<blockquote>
<p>show collections  </p>
</blockquote>
<p>3.5 ç´¢å¼•æ“ä½œ<br><code>åœ¨HELLOé›†åˆä¸Šï¼Œå»ºç«‹å¯¹IDå­—æ®µçš„ç´¢å¼•ï¼Œ1ä»£è¡¨å‡åº</code></p>
<blockquote>
<p>db.HELLO.ensureIndex({ID:1})  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åœ¨HELLOé›†åˆä¸Šï¼Œå»ºç«‹å¯¹IDå­—æ®µã€Nameå­—æ®µå’ŒGenderå­—æ®µå»ºç«‹ç´¢å¼•</span><br></pre></td></tr></table></figure>
<blockquote>
<p>db.HELLO.ensureIndex({ID:1,Name:1,Gender:-1})<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æŸ¥çœ‹HELLOé›†åˆä¸Šçš„æ‰€æœ‰ç´¢å¼•</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>db.HELLO.getIndexes()  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">åˆ é™¤ç´¢å¼•ç”¨db.collection.dropIndex()ï¼Œæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥æ˜¯å»ºç«‹ç´¢å¼•æ—¶æŒ‡å®šçš„å­—æ®µï¼Œä¹Ÿå¯ä»¥æ˜¯getIndexçœ‹åˆ°çš„ç´¢å¼•åç§°ã€‚</span><br></pre></td></tr></table></figure>
<blockquote>
<p>db.HELLO.dropIndex( â€œIDIdxâ€ )<br>db.HELLO.dropIndex({ID:1})  </p>
</blockquote>
<p>3.6 ä¸ºé›†åˆä¸­çš„æ¯ä¸€æ¡è®°å½•æ·»åŠ ä¸€ä¸ªå­—æ®µ<br><code>ä¸ºuseré›†åˆä¸­çš„æ¯ä¸€æ¡è®°å½•æ·»åŠ ä¸€ä¸ªåä¸ºexçš„å­—æ®µï¼Œå¹¶èµ‹å€¼ä¸ºbarrymore</code></p>
<blockquote>
<p>db.user.update({},{$set:{â€œexâ€:â€barrymoreâ€}},false,true)  </p>
</blockquote>
<p>3.7 é‡å‘½åå­—æ®µ<br><code>å°†é›†åˆä¸­çš„æ‰€æœ‰è®°å½•çš„genderå­—æ®µçš„åå­—ä¿®æ”¹ä¸ºsex</code></p>
<blockquote>
<p>db.user.update({},{$rename:{â€œgenderâ€:â€sexâ€}},false,true)  </p>
</blockquote>
<p>3.8 åˆ é™¤å­—æ®µ<br><code>åˆ é™¤é›†åˆä¸­æ‰€æœ‰è®°å½•çš„exå­—æ®µ</code></p>
<blockquote>
<p>db.user.update({},{â€œ$unsetâ€:{â€œexâ€:1}},false,true)  </p>
</blockquote>
<p>4.1 å‘useré›†åˆä¸­æ’å…¥ä¸¤æ¡è®°å½•  </p>
<blockquote>
<p>db.user.insert({â€˜nameâ€™:â€™Gal Gadotâ€™,â€™genderâ€™:â€™femaleâ€™,â€™ageâ€™:28,â€™salaryâ€™:11000})<br>db.user.insert({â€˜nameâ€™:â€™Mikie Haraâ€™,â€™genderâ€™:â€™femaleâ€™,â€™ageâ€™:26,â€™salaryâ€™:7000})  </p>
</blockquote>
<p>4.2 åŒæ ·ä¹Ÿå¯ä»¥ç”¨saveå®Œæˆç±»ä¼¼çš„æ’å…¥æ“ä½œ  </p>
<blockquote>
<p>db.user.save({â€˜nameâ€™:â€™Wentworth Earl Millerâ€™,â€™genderâ€™:â€™maleâ€™,â€™ageâ€™:41,â€™salaryâ€™:33000})</p>
</blockquote>
<p>5.1 æŸ¥æ‰¾é›†åˆä¸­çš„æ‰€æœ‰è®°å½•</p>
<blockquote>
<p>db.user.find()  </p>
</blockquote>
<p>5.2 æŸ¥æ‰¾é›†åˆä¸­çš„ç¬¦åˆæ¡ä»¶çš„è®°å½•</p>
<p>5.2.1 å•ä¸€æ¡ä»¶<br>5.2.1.1 Exact Equal:<br><code>æŸ¥è¯¢ageä¸ºäº†23çš„æ•°æ®</code></p>
<blockquote>
<p>db.user.find({â€œageâ€:23})  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52442736d8947fb501000001"</span>), <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"salary"</span> : <span class="number">15</span> &#125;</span><br></pre></td></tr></table></figure>
<p>5.2.1.2 Great Than:  </p>
<p><code>æŸ¥è¯¢salaryå¤§äº5000çš„æ•°æ®</code></p>
<blockquote>
<p>db.user.find({salary:{$gt:5000}})  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br><span class="line"><span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">5.2.1.3 Fuzzy Match  </span></span><br><span class="line"><span class="string">`</span>æŸ¥è¯¢nameä¸­åŒ…å«<span class="string">'a'</span>çš„æ•°æ®<span class="string">`</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&gt; db.user.find(&#123;name:/a/&#125;)  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>js</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br></pre></td></tr></table></figure>
<p><code>æŸ¥è¯¢nameä»¥Gæ‰“å¤´çš„æ•°æ®</code></p>
<blockquote>
<p>db.user.find({name:/^G/})  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;</span><br></pre></td></tr></table></figure>
<p>5.2.2 å¤šæ¡ä»¶â€ä¸â€<br><code>æŸ¥è¯¢ageå°äº30ï¼Œsalaryå¤§äº6000çš„æ•°æ®</code></p>
<blockquote>
<p>db.user.find({age:{$lt:30},salary:{$gt:6000}})  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br></pre></td></tr></table></figure>
<p>5.2.3 å¤šæ¡ä»¶â€æˆ–â€<br><code>æŸ¥è¯¢ageå°äº25ï¼Œæˆ–è€…salaryå¤§äº10000çš„è®°å½•</code></p>
<blockquote>
<p>db.user.find({$or:[{salary:{$gt:10000}},{age:{$lt:25}}]})  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52442736d8947fb501000001"</span>), <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"salary"</span> : <span class="number">15</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br></pre></td></tr></table></figure>
<p>5.2.4ä¸ç­‰äºæŸ¥è¯¢<br><code>æŸ¥è¯¢å¹´é¾„ä¸ç­‰äº23çš„è®°å½•(è¿™é‡Œè¿”å›ç»“æœä¸­ï¼Œä¼šåŒ…å«æ²¡æœ‰å¹´é¾„å­—æ®µçš„è®°å½•)</code></p>
<blockquote>
<p>db.user.find({â€œageâ€:{ $ne: 23}})  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11050</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7050</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"524562d681c83a5bf26fc286"</span>), <span class="string">"gender"</span> : <span class="string">"female1"</span>, <span class="string">"salary"</span> : <span class="number">50</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"524563e881c83a5bf26fc287"</span>), <span class="string">"gender"</span> : <span class="string">"x"</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5245648081c83a5bf26fc288"</span>), <span class="string">"gender"</span> : <span class="string">"x"</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5245648e81c83a5bf26fc289"</span>), <span class="string">"age"</span> : <span class="string">"x"</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"524564c181c83a5bf26fc28a"</span>), <span class="string">"age"</span> : <span class="string">"x"</span>, <span class="string">"gender"</span> : <span class="number">4</span> &#125;</span><br></pre></td></tr></table></figure>
<p>5.2.5 åˆ©ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æŸ¥è¯¢<br><code>æŸ¥è¯¢åå­—ä¸­å«æœ‰å­—æ¯Eçš„è®°å½•(iè¡¨ç¤ºå¿½ç•¥å¤§å°å†™)</code></p>
<blockquote>
<p>db.user.find({name:/E/i})  </p>
</blockquote>
<p><code>ä¹Ÿå¯ä»¥ç”¨ï¼š</code>  </p>
<blockquote>
<p>db.user.find({name:{$regex:â€™Eâ€™,$options:â€™iâ€™}})  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"ex"</span> : <span class="string">"barrymore"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"salary"</span> : <span class="number">7050</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"ex"</span> : <span class="string">"barrymore"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br></pre></td></tr></table></figure>
<p><code>æŸ¥è¯¢åå­—ä¸­å«æœ‰å­—æ¯Eçš„è®°å½•(é»˜è®¤åŒºåˆ†å¤§å°å†™)</code></p>
<blockquote>
<p>db.user.find({name:/E/})  </p>
</blockquote>
<p><code>ç­‰ä»·äºï¼š</code>  </p>
<blockquote>
<p>db.user.find({name:{$regex:â€™Eâ€™}})  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"ex"</span> : <span class="string">"barrymore"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br></pre></td></tr></table></figure>
<p><code>æŸ¥è¯¢æŸä¸ªå­—æ®µä»¥â€œ.0â€ç»“å°¾çš„è®°å½•</code></p>
<blockquote>
<p>db.user.find(name:/.0$/)  </p>
</blockquote>
<p><strong>è¿™é‡Œçš„â€//â€œä¸­çš„å†…å®¹è¡¨ç¤ºæ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œâ€.â€éœ€è¦è½¬ä¹‰ï¼Œâ€$â€ç¬¦å·è¡¨ç¤ºç»“å°¾</strong></p>
<p>5.3 æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€æ¡è®°å½•</p>
<blockquote>
<p>db.user.findOne({$or:[{salary:{$gt:10000}},<br>{age:{$lt:25}}]})  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;  </span><br><span class="line">    <span class="string">"_id"</span> : ObjectId(<span class="string">"52442736d8947fb501000001"</span>),  </span><br><span class="line">    <span class="string">"name"</span> : <span class="string">"lfqy"</span>,  </span><br><span class="line">    <span class="string">"gender"</span> : <span class="string">"male"</span>,  </span><br><span class="line">    <span class="string">"age"</span> : <span class="number">23</span>,  </span><br><span class="line">    <span class="string">"salary"</span> : <span class="number">15</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>5.4 æŸ¥è¯¢è®°å½•çš„æŒ‡å®šå­—æ®µ</p>
<p><code>æŸ¥è¯¢useré›†åˆä¸­æ‰€æœ‰è®°å½•çš„name,age,salary,sex_orientationå­—æ®µ</code></p>
<blockquote>
<p>db.user.find({},{name:1,age:1,salary:1,sex_orientation:true})  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52442736d8947fb501000001"</span>), <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"salary"</span> : <span class="number">15</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„ï¼šè¿™é‡Œçš„1è¡¨ç¤ºæ˜¾ç¤ºæ­¤åˆ—çš„æ„æ€ï¼Œä¹Ÿå¯ä»¥ç”¨trueè¡¨ç¤ºã€‚<br>å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤_idï¼Œå­—æ®µéƒ½æ˜¯æ˜¾ç¤ºçš„ã€‚å¦‚æœè¦å…¶ä¸æ˜¾ç¤ºï¼Œåªéœ€å°†å…¶æ˜¾ç¤ºæŒ‡å®šä¸ºfalse:</strong></p>
<blockquote>
<p>db.user.find({},{name:1,age:1,salary:1,sex_orientation:true,_id:false})  </p>
</blockquote>
<p>5.5 æŸ¥è¯¢æŒ‡å®šå­—æ®µçš„æ•°æ®ï¼Œå¹¶å»é‡</p>
<p><code>æŸ¥è¯¢genderå­—æ®µçš„æ•°æ®ï¼Œå¹¶å»æ‰é‡å¤æ•°æ®</code></p>
<blockquote>
<p>db.user.distinct(â€˜genderâ€™)  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ <span class="string">"male"</span>, <span class="string">"female"</span> ]</span><br></pre></td></tr></table></figure>
<p>5.6 å¯¹æŸ¥è¯¢ç»“æœé›†çš„æ“ä½œ</p>
<p>5.6.1 pretty print  </p>
<p><code>ä¸ºäº†æ–¹ä¾¿ï¼Œmongoä¹Ÿæä¾›äº†pretty printå·¥å…·db.collection.pretty()æˆ–è€…æ˜¯db.collection.forEach(printjson)</code></p>
<blockquote>
<p>db.user.find().pretty()  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&#123;  </span><br><span class="line">    <span class="string">"_id"</span> : ObjectId(<span class="string">"52442736d8947fb501000001"</span>),  </span><br><span class="line">    <span class="string">"name"</span> : <span class="string">"lfqy"</span>,  </span><br><span class="line">    <span class="string">"gender"</span> : <span class="string">"male"</span>,  </span><br><span class="line">    <span class="string">"age"</span> : <span class="number">23</span>,  </span><br><span class="line">    <span class="string">"salary"</span> : <span class="number">15</span>  </span><br><span class="line">&#125;  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>),  </span><br><span class="line">    <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>,  </span><br><span class="line">    <span class="string">"gender"</span> : <span class="string">"female"</span>,  </span><br><span class="line">    <span class="string">"age"</span> : <span class="number">28</span>,  </span><br><span class="line">    <span class="string">"salary"</span> : <span class="number">11000</span>  </span><br><span class="line">&#125;  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>),  </span><br><span class="line">    <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>,  </span><br><span class="line">    <span class="string">"gender"</span> : <span class="string">"female"</span>,  </span><br><span class="line">    <span class="string">"age"</span> : <span class="number">26</span>,  </span><br><span class="line">    <span class="string">"salary"</span> : <span class="number">7000</span>  </span><br><span class="line">&#125;  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>),  </span><br><span class="line">    <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>,  </span><br><span class="line">    <span class="string">"gender"</span> : <span class="string">"male"</span>,  </span><br><span class="line">    <span class="string">"age"</span> : <span class="number">41</span>,  </span><br><span class="line">    <span class="string">"salary"</span> : <span class="number">33000</span>  </span><br><span class="line">&#125;  </span><br><span class="line">&#123;  </span><br><span class="line">    <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>),  </span><br><span class="line">    <span class="string">"name"</span> : <span class="string">"not known"</span>,  </span><br><span class="line">    <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>,  </span><br><span class="line">    <span class="string">"age"</span> : <span class="number">13</span>  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>5.6.2 æŒ‡å®šç»“æœé›†æ˜¾ç¤ºçš„æ¡ç›®<br>5.6.2.1 æ˜¾ç¤ºç»“æœé›†ä¸­çš„å‰3æ¡è®°å½•  </p>
<blockquote>
<p>db.user.find().limit(3)  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52442736d8947fb501000001"</span>), <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"salary"</span> : <span class="number">15</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;</span><br></pre></td></tr></table></figure>
<p>5.6.2.2 æŸ¥è¯¢ç¬¬1æ¡ä»¥åçš„æ‰€æœ‰æ•°æ®  </p>
<blockquote>
<p>db.user.find().skip(1)  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br></pre></td></tr></table></figure>
<p>5.6.2.3 å¯¹ç»“æœé›†æ’åº<br><code>å‡åº</code></p>
<blockquote>
<p>db.user.find().sort({salary:1})  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52442736d8947fb501000001"</span>), <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"salary"</span> : <span class="number">15</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br></pre></td></tr></table></figure>
<p><code>é™åº</code></p>
<blockquote>
<p>db.user.find().sort({salary:-1})  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52442736d8947fb501000001"</span>), <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"salary"</span> : <span class="number">15</span> &#125;</span><br></pre></td></tr></table></figure>
<p><code>ä¹Ÿå¯ä»¥å°†æ’åºä¾æ®çš„å­—æ®µï¼Œå†™åœ¨ä¸€ä¸ªlisté‡Œé¢ï¼Œå¦‚ä¸‹ï¼š</code></p>
<blockquote>
<p>db.user.find().sort([(â€œsalaryâ€,1),(â€œnameâ€,-1)]) </p>
</blockquote>
<p>5.7 ç»Ÿè®¡æŸ¥è¯¢ç»“æœä¸­è®°å½•çš„æ¡æ•°</p>
<p>5.7.1 ç»Ÿè®¡é›†åˆä¸­çš„æ‰€æœ‰è®°å½•æ¡æ•°  </p>
<blockquote>
<p>db.user.find().count()  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>5.7.2 æŸ¥è¯¢ç¬¦åˆæ¡ä»¶çš„è®°å½•æ•°  </p>
<p><code>æŸ¥è¯¢salaryå°äº4000æˆ–å¤§äº10000çš„è®°å½•æ•°</code></p>
<blockquote>
<p>db.user.find({$or: [{salary: {$lt:4000}}, {salary: {$gt:10000}}]}).count()  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">4</span></span><br></pre></td></tr></table></figure>
<p>5.8 æŸ¥è¯¢å­˜åœ¨(æˆ–ä¸å­˜åœ¨)æŒ‡å®šå­—æ®µçš„è®°å½•</p>
<p><code>æŸ¥è¯¢ä¸å­˜åœ¨ageå­—æ®µï¼Œä½†æ˜¯æœ‰genderå­—æ®µï¼Œå¹¶ä¸”exä¸ºbarrymoreçš„è®°å½•</code></p>
<blockquote>
<p>db.user.find({â€œageâ€:{$exists:false},â€genderâ€:{$exists:true},â€exâ€:â€barrymoreâ€})  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"524562d681c83a5bf26fc286"</span>), <span class="string">"ex"</span> : <span class="string">"barrymore"</span>, <span class="string">"gender"</span> : <span class="string">"female1"</span>, <span class="string">"salary"</span> : <span class="number">50</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"524563e881c83a5bf26fc287"</span>), <span class="string">"ex"</span> : <span class="string">"barrymore"</span>, <span class="string">"gender"</span> : <span class="string">"x"</span> &#125;  </span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5245648081c83a5bf26fc288"</span>), <span class="string">"ex"</span> : <span class="string">"barrymore"</span>, <span class="string">"gender"</span> : <span class="string">"x"</span> &#125;</span><br></pre></td></tr></table></figure>
<p>6.1 åˆ é™¤æ•´ä¸ªé›†åˆä¸­çš„æ‰€æœ‰æ•°æ®</p>
<blockquote>
<p>db.test.insert({name:â€asdfâ€})<br>show collections  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">book  </span><br><span class="line">system.indexes  </span><br><span class="line">test  </span><br><span class="line">user</span><br></pre></td></tr></table></figure>
<p><code>åˆ°è¿™é‡Œæ–°å»ºäº†ä¸€ä¸ªé›†åˆï¼Œåä¸ºtestã€‚</code><br><code>åˆ é™¤testä¸­çš„æ‰€æœ‰è®°å½•ã€‚</code></p>
<blockquote>
<p>db.test.remove()<br>show collections  </p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">book  </span><br><span class="line">system.indexes  </span><br><span class="line">test  </span><br><span class="line">user</span><br></pre></td></tr></table></figure>
<blockquote>
<p>db.test.find()</p>
</blockquote>
<p><code>å¯è§testä¸­çš„è®°å½•å…¨éƒ¨è¢«åˆ é™¤</code></p>
<p><strong>æ³¨æ„db.collection.remove()å’Œdrop()çš„åŒºåˆ«ï¼Œremove()åªæ˜¯åˆ é™¤äº†é›†åˆä¸­æ‰€æœ‰çš„è®°å½•ï¼Œè€Œé›†åˆä¸­åŸæœ‰çš„ç´¢å¼•ç­‰ä¿¡æ¯è¿˜åœ¨ï¼Œè€Œdrop()åˆ™æŠŠé›†åˆç›¸å…³ä¿¡æ¯æ•´ä¸ªåˆ é™¤(åŒ…æ‹¬ç´¢å¼•)</strong></p>
<p>6.2 åˆ é™¤é›†åˆä¸­ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰è®°å½•</p>
<blockquote>
<p>db.user.remove({name:â€™lfqyâ€™})</p>
</blockquote>
<blockquote>
<p>db.user.find()</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>db.user.find()<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52455cc825e437dfea8fd4f8"</span>), <span class="string">"name"</span> : <span class="string">"2"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">2</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52455d8a25e437dfea8fd4fa"</span>), <span class="string">"name"</span> : <span class="string">"1"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">1</span> &#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>db.user.remove( {salary :{$lt:10}})<br>db.user.find()</p>
</blockquote>
<figure class="highlight plain"><figcaption><span>"_id" : ObjectId("52453cfb25e437dfea8fd4f4"), "name" : "Gal Gadot", "gender" : "female", "age" : 28, "salary" : 11000 &#125;</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;52453d8525e437dfea8fd4f5&quot;), &quot;name&quot; : &quot;Mikie Hara&quot;, &quot;gender&quot; : &quot;female&quot;, &quot;age&quot; : 26, &quot;salary&quot; : 7000 &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;52453e2125e437dfea8fd4f6&quot;), &quot;name&quot; : &quot;Wentworth Earl Miller&quot;, &quot;gender&quot; : &quot;male&quot;, &quot;age&quot; : 41, &quot;salary&quot; : 33000 &#125;</span><br><span class="line">&#123; &quot;_id&quot; : ObjectId(&quot;52454155d8947fb70d000000&quot;), &quot;name&quot; : &quot;not known&quot;, &quot;sex_orientation&quot; : &quot;male&quot;, &quot;age&quot; : 13, &quot;salary&quot; : 30000 &#125;</span><br></pre></td></tr></table></figure>
<p>6.3  åˆ é™¤é›†åˆä¸­ç¬¦åˆæ¡ä»¶çš„ä¸€æ¡è®°å½•</p>
<blockquote>
<p>db.user.find()</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52455de325e437dfea8fd4fb"</span>), <span class="string">"name"</span> : <span class="string">"1"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">1</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52455de925e437dfea8fd4fc"</span>), <span class="string">"name"</span> : <span class="string">"2"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">2</span> &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>db.user.remove({salary :{$lt:10}},1)<br>db.user.find()</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52455de925e437dfea8fd4fc"</span>), <span class="string">"name"</span> : <span class="string">"2"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">2</span> &#125;</span><br></pre></td></tr></table></figure>
<p><code>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥æ˜¯db.user.remove({salary :{$lt:10}},true)</code></p>
<p>7 æ›´æ–°æ“ä½œ<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.collection.update(æŸ¥è¯¢æ¡ä»¶, </span><br><span class="line">	æ›´æ–°å†…å®¹,</span><br><span class="line">	[é»˜è®¤æ˜¯<span class="literal">false</span>ï¼Œä¸å­˜åœ¨updateçš„è®°å½•,ä¸æ’å…¥,<span class="literal">true</span>ä¸ºæ’å…¥], </span><br><span class="line">	[é»˜è®¤<span class="literal">false</span>,åªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸º<span class="literal">true</span>,å°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°ã€‚] )</span><br></pre></td></tr></table></figure></p>
<p>7.1 èµ‹å€¼æ›´æ–°</p>
<blockquote>
<p>db.user.find()</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52455f8925e437dfea8fd4fd"</span>), <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">1</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5245607525e437dfea8fd4fe"</span>), <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">2</span> &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>db.user.update({name:â€™lfqyâ€™},{$set:{age:23}},false,true)<br>db.user.find()</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52455f8925e437dfea8fd4fd"</span>), <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"salary"</span> : <span class="number">1</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5245607525e437dfea8fd4fe"</span>), <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"salary"</span> : <span class="number">2</span> &#125;</span><br><span class="line">db.user.find()</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52455f8925e437dfea8fd4fd"</span>), <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"salary"</span> : <span class="number">1</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5245607525e437dfea8fd4fe"</span>), <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"salary"</span> : <span class="number">2</span> &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>db.user.update({name:â€™lfqy1â€™},{$set:{age:23}},true,true)<br>db.user.find()</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52455f8925e437dfea8fd4fd"</span>), <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"salary"</span> : <span class="number">1</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5245607525e437dfea8fd4fe"</span>), <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"salary"</span> : <span class="number">2</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5245610881c83a5bf26fc285"</span>), <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"name"</span> : <span class="string">"lfqy1"</span> &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>db.user.update({name:â€™lfqyâ€™},{$set:{interest:â€NBAâ€}},false,true)<br>db.user.find()</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5245610881c83a5bf26fc285"</span>), <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"name"</span> : <span class="string">"lfqy1"</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52455f8925e437dfea8fd4fd"</span>), <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"interest"</span> : <span class="string">"NBA"</span>, <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"salary"</span> : <span class="number">1</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5245607525e437dfea8fd4fe"</span>), <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"interest"</span> : <span class="string">"NBA"</span>, <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"salary"</span> : <span class="number">2</span> &#125;</span><br></pre></td></tr></table></figure>
<p>7.2 å¢å€¼æ›´æ–°</p>
<blockquote>
<p>db.user.find()</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5245610881c83a5bf26fc285"</span>), <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"name"</span> : <span class="string">"lfqy1"</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52455f8925e437dfea8fd4fd"</span>), <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"interest"</span> : <span class="string">"NBA"</span>, <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"salary"</span> : <span class="number">1</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5245607525e437dfea8fd4fe"</span>), <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"interest"</span> : <span class="string">"NBA"</span>, <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"salary"</span> : <span class="number">2</span> &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>db.user.update({gender:â€™femaleâ€™},{$inc:{salary:50}},false,true)<br>db.user.find()</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453cfb25e437dfea8fd4f4"</span>), <span class="string">"name"</span> : <span class="string">"Gal Gadot"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">28</span>, <span class="string">"salary"</span> : <span class="number">11050</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453d8525e437dfea8fd4f5"</span>), <span class="string">"name"</span> : <span class="string">"Mikie Hara"</span>, <span class="string">"gender"</span> : <span class="string">"female"</span>, <span class="string">"age"</span> : <span class="number">26</span>, <span class="string">"salary"</span> : <span class="number">7050</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52453e2125e437dfea8fd4f6"</span>), <span class="string">"name"</span> : <span class="string">"Wentworth Earl Miller"</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">41</span>, <span class="string">"salary"</span> : <span class="number">33000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52454155d8947fb70d000000"</span>), <span class="string">"name"</span> : <span class="string">"not known"</span>, <span class="string">"sex_orientation"</span> : <span class="string">"male"</span>, <span class="string">"age"</span> : <span class="number">13</span>, <span class="string">"salary"</span> : <span class="number">30000</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5245610881c83a5bf26fc285"</span>), <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"name"</span> : <span class="string">"lfqy1"</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"52455f8925e437dfea8fd4fd"</span>), <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"interest"</span> : <span class="string">"NBA"</span>, <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"salary"</span> : <span class="number">1</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5245607525e437dfea8fd4fe"</span>), <span class="string">"age"</span> : <span class="number">23</span>, <span class="string">"gender"</span> : <span class="string">"male"</span>, <span class="string">"interest"</span> : <span class="string">"NBA"</span>, <span class="string">"name"</span> : <span class="string">"lfqy"</span>, <span class="string">"salary"</span> : <span class="number">2</span> &#125;</span><br></pre></td></tr></table></figure>
<p>å…³äºæ›´æ–°æ“ä½œï¼ˆdb.collection.update(criteria, objNew, upsert, multi )ï¼‰ï¼Œè¦è¯´æ˜çš„æ˜¯ï¼Œå¦‚æœupsertä¸ºtrueï¼Œé‚£ä¹ˆåœ¨æ²¡æœ‰æ‰¾åˆ°ç¬¦åˆæ›´æ–°æ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œmongoä¼šåœ¨é›†åˆä¸­æ’å…¥ä¸€æ¡è®°å½•å…¶å€¼æ»¡è¶³æ›´æ–°æ¡ä»¶çš„è®°å½•(å…¶ä¸­çš„å­—æ®µåªæœ‰æ›´æ–°æ¡ä»¶ä¸­æ¶‰åŠçš„å­—æ®µï¼Œå­—æ®µçš„å€¼æ»¡è¶³æ›´æ–°æ¡ä»¶)ï¼Œç„¶åå°†å…¶æ›´æ–°ï¼ˆæ³¨æ„ï¼Œå¦‚æœæ›´æ–°æ¡ä»¶æ˜¯$ltè¿™ç§ä¸ç­‰å¼æ¡ä»¶ï¼Œé‚£ä¹ˆupsertæ’å…¥çš„è®°å½•åªä¼šåŒ…å«æ›´æ–°æ“ä½œæ¶‰åŠçš„å­—æ®µï¼Œè€Œä¸ä¼šæœ‰æ›´æ–°æ¡ä»¶ä¸­çš„å­—æ®µã€‚è¿™ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå› ä¸ºæ²¡æ³•ä¸ºè¿™ç§å­—æ®µå®šå€¼ï¼Œmongoç´¢æ€§å°±ä¸å–è¿™äº›å­—æ®µï¼‰ã€‚å¦‚æœç¬¦åˆæ¡ä»¶çš„è®°å½•ä¸­æ²¡æœ‰è¦æ›´æ–°çš„å­—æ®µï¼Œé‚£ä¹ˆmongoä¼šä¸ºå…¶åˆ›å»ºè¯¥å­—æ®µï¼Œå¹¶æ›´æ–°ã€‚</p>
<h1 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h1><ul>
<li><a href="http://blog.csdn.net/xia7139/article/details/12570569" target="_blank" rel="noopener">http://blog.csdn.net/xia7139/article/details/12570569</a></li>
</ul>
<hr>
<blockquote>
<p><strong>æ–‡ç« è‹¥æœ‰çº°æ¼è¯·å¤§å®¶è¡¥å……æŒ‡æ­£,è°¢è°¢~~</strong><br><a href="http://blog.xinshangshangxin.com">http://blog.xinshangshangxin.com</a> SHANGæ®‡</p>
</blockquote>
    </div>
  </div>
  
  
  
    <div class="social-share" style="margin-top: -2rem" data-wechat-qrcode-title="<p>å¾®ä¿¡æ‰«ä¸€æ‰«</p>" data-wechat-qrcode-helper="<p>å¾®ä¿¡å³ä¸Šè§’, æ‰«ä¸€æ‰«åˆ†äº«</p>" data-sites="google, facebook, twitter, wechat, qzone, qq, weibo, douban">
  <span style="color: #6b7487; font-size: 1.4rem;">åˆ†äº«åˆ°: </span>
</div>
<script src="https://cdn.bootcss.com/social-share.js/1.0.16/js/social-share.min.js" async></script>
  

  

  <div class="article-footer">
    <div class="article-meta pull-left">
      <span>
        
          <i class="iconfont icon-06tags"></i>æ ‡ç­¾: 
          
          <span class="span--tag">
            <a href="/tags/mongodb/">
              #mongodb
            </a>
          </span>
          
        
      </span>
    </div>
    <div class="article-meta pull-right">
    </div>
  </div>
</div>


  <aside id="sidebar">
    <p id="sidebar-header"></p>
    <ol id="sidebar-toc"></ol>
  </aside>
  <script async>setTimeout(generateToc, 10);</script>


  <nav class="post-navigation">
    
      <div class="nav-pre">
        <i class="iconfont icon-prev"></i>
        ä¸Šä¸€ç¯‡:
        <a href="/2015/08/16/åœ¨sailsä¸­ä½¿ç”¨gulpä»£æ›¿gruntä¸ªäººæ€»ç»“/" target="_self">åœ¨sailsä¸­ä½¿ç”¨gulpä»£æ›¿gruntä¸ªäººæ€»ç»“</a>
      </div>
    
    
      <div class="nav-next">
        ä¸‹ä¸€ç¯‡:
        <a href="/2015/08/30/è½¬-AngularJSä¸­çš„Providerä»¬ï¼šServiceå’ŒFactoryç­‰çš„åŒºåˆ«/" target="_self">[è½¬]AngularJSä¸­çš„Providerä»¬ï¼šServiceå’ŒFactoryç­‰çš„åŒºåˆ«</a>
        <i class="iconfont icon-next"></i>
      </div>
    
  </nav>

   

   

</div>


      <footer>
  <p class="site-info">
    <!-- åšå®¢å·²èŒèŒå“’è¿è¡Œ<span id="time-to-now"></span><span class="my-face">(â—'â—¡'â—)ï¾‰â™¥</span> -->
    
      å¾—ä¹‹æˆ‘å¹¸,å¤±ä¹‹æˆ‘å‘½
    
    <br>
    Theme - <a href="https://github.com/dongyuanxin/theme-bmw">BMW</a> | Made With ğŸ’— | Powered by <a href="https://godbmw.com/">GodBMW</a>
    <br>
    
  </p>
</footer>



<script>
const timeToNowDOM = document.querySelector("#time-to-now");
const startTimestamp = new Date(2018, 1, 10).getTime();

const updateTimeStr = () => {
  let offset = parseInt(
      (new Date().getTime() - startTimestamp) / 1000,
      10
    ),
    day = Math.floor(offset / 86400),
    hour = Math.floor((offset % 86400) / 3600),
    minute = Math.floor(((offset % 86400) % 3600) / 60),
    second = Math.floor(((offset % 86400) % 3600) % 60);
  timeToNowDOM.innerHTML =
    day + "å¤©" + hour + "å°æ—¶" + minute + "åˆ†é’Ÿ" + second + "ç§’";
  setTimeout(updateTimeStr, 500);
}

setTimeout(updateTimeStr, 500);
</script>


      <div class="back-to-top hidden">
  <span>
    <i class="iconfont icon-60"></i><span></span>%
  </span>
</div>

<script>
const updateIconToTop = percent => {
  let dom = document.querySelector(".back-to-top span span");
  dom.innerText = percent;
  if(percent < 1) {
    document.querySelector(".back-to-top").className = "back-to-top hidden";
  } else {
    document.querySelector(".back-to-top").className = "back-to-top";
  }
}

const handleScoll = () => {
  let isRunning = false;
  return () => {
    if (isRunning) return;
    isRunning = true;
    window.requestAnimationFrame(timestamp => {
      let scrollTop =
          document.documentElement.scrollTop || document.body.scrollTop,
        scrollHeight =
          document.documentElement.scrollHeight ||
          document.body.scrollHeight,
        clientHeight =
          document.documentElement.clientHeight ||
          document.body.clientHeight;
      isRunning = false;
      if (scrollTop <= 1) {
        updateIconToTop(0);
        return;
      }
      if (scrollTop + clientHeight >= scrollHeight) {
        updateIconToTop(100);
      } else {
        updateIconToTop(parseInt(
          100 * scrollTop / (scrollHeight - clientHeight),
          10
        ));
      }
    });
  };
}

const backToTop = () => {
  let scrollTop =
      document.documentElement.scrollTop || document.body.scrollTop,
    delay = 10,
    time = 200;
  if (scrollTop <= 20) {
    document.documentElement.scrollTop = 0;
    document.body.scrollTop = 0;
    return;
  }
  let step = Math.ceil(scrollTop * delay / time);
  let timer = setInterval(() => {
    scrollTop =
      document.documentElement.scrollTop || document.body.scrollTop;
    if (scrollTop - step <= 0) {
      document.documentElement.scrollTop = 0;
      document.body.scrollTop = 0;
      clearInterval(timer);
    } else {
      document.documentElement.scrollTop = scrollTop - step;
      document.body.scrollTop = scrollTop - step;
    }
  }, delay);
}

document.addEventListener("scroll", handleScoll(), false);

document.querySelector(".back-to-top").addEventListener("click", backToTop, false);

</script>

    </div>

    
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
<script>
  (() => {
    const mathjaxConfig = {
      showProcessingMessages: false, //å…³é—­jsåŠ è½½è¿‡ç¨‹ä¿¡æ¯
      messageStyle: "none", //ä¸æ˜¾ç¤ºä¿¡æ¯
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [["$", "$"], ["\\(", "\\)"]], //è¡Œå†…å…¬å¼é€‰æ‹©ç¬¦
        displayMath: [["$$", "$$"], ["\\[", "\\]"]], //æ®µå†…å…¬å¼é€‰æ‹©ç¬¦
        skipTags: ["script", "noscript", "style", "textarea", "pre", "code", "a"] //é¿å¼€æŸäº›æ ‡ç­¾
      },
      "HTML-CSS": {
        availableFonts: ["STIX", "TeX"], //å¯é€‰å­—ä½“
        showMathMenu: false //å…³é—­å³å‡»èœå•æ˜¾ç¤º
      }
    }

    let mathjaxInterval = setInterval(() => {
      if(!window.MathJax){
        return;
      }
      window.MathJax.Hub.Config(mathjaxConfig)
      window.MathJax.Hub.Queue(["Typeset", MathJax.Hub, document.getElementById('app')])

      clearInterval(mathjaxInterval)
    }, 10)    
  })()
</script>
    

    <script src="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script>
<script async>
  let fancyTimer = setInterval(function(){
    if(!window.$){
      return;
    }
    $(document).ready(function() {
      $(".post img").each(function () {
        if($(this).parent().get(0).tagName.toLowerCase() === "a") {
          return;
        }
        // $(this).attr("data-fancybox", "gallery"); // if you add 'data-fancybox', img will display after showed
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "gallery");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      });
      
      clearInterval(fancyTimer);
    });
  }, 10);
</script>

    
  </body>

</html>
