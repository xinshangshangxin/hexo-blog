<!DOCTYPE html>
<html lang="zh-CN">

  
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  <meta name="author" content="è‘£æ²…é‘«, yuanxin.me@gmail.com">
  
  
  
  <title>RxJS å­¦ä¹ ç¬”è®° | SHANG Blog</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="js,rxjs,RxJS,">
  

  <script>
    console.log('\n%c Hexo-theme-bmw v4.0 ' + '%c ğŸ‰ https://github.com/dongyuanxin/theme-bmw ğŸ‰\n' + '\n%c View demo online ' + '%c ğŸ” https://godbmw.com/ ğŸ”  \n' , 'color: #fadfa3; background: #030307; padding:3px 0;', '', 'color: #fadfa3; background: #030307; padding:3px 0;', '');
  </script>

  
    <meta name="description" content="æ®‡Blog">
  

  

  
    <link rel="icon" href="/images/favicon.ico">
    <link rel="apple-touch-icon" href="/images/touch-icon.png">
  

  <link href="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/icon/iconfont.css">
<link rel="stylesheet" href="/css/github-markdown.css">
<link rel="stylesheet" href="/css/highlight.css">

  <script src="/js/util.js"></script>
<script src="/js/valine.min.js"></script>

  

  
    <link href="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.js" async></script>
  

  
    <link href="https://cdn.bootcss.com/social-share.js/1.0.16/css/share.min.css" rel="stylesheet">
  
  
  <script src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js" async></script>
  
  

</head>

  <body>

    

    <div id="app">

      <div class="header-wrap">
  <header>
    <div class="site-brand">
      <div class="site-title">
        <a href="/">SHANG</a>
      </div>
    </div>
    <nav class="site-navigation">
      <ul class="nav-menu">
      
        <li class="nav-item" data-path="/">
          
            <a href="/" target="_self">
              ä¸»é¡µ
            </a>
          
        </li>
      
        <li class="nav-item" data-path="/archives/">
          
            <a href="/archives/" target="_self">
              å½’æ¡£
            </a>
          
        </li>
      
        <li class="nav-item" data-path="https://github.com/xinshangshangxin">
          
            <a href="https://github.com/xinshangshangxin" target="_self">
              Github
            </a>
          
        </li>
      
      </ul>
    </nav>
    <i class="iconfont icon-menu"></i>
  </header>
</div>

<script>
  let links = document.querySelectorAll('.nav-item');
  for(let link of links){
    let childrenLink = link.querySelector('ul');
    link.addEventListener('mouseenter', () => {
      if(childrenLink) {
        childrenLink.className = "nav-menu--dropdown active";
      }
    })
    link.addEventListener('mouseleave', () => {
      if(childrenLink) {
        childrenLink.className = "nav-menu--dropdown";
      }
    })
  }
  let rootRealPath = getRealPath(window.location.pathname, true);
  for(let link of links) {
    let linkPath = link.getAttribute("data-path");
    if(linkPath && getRealPath(linkPath, true) === rootRealPath) {
      link.className = "nav-item hover";
    }
  }

  let iconMenu = document.querySelector("i.iconfont.icon-menu"),
    iconMenuClicked = false;
  let navDOM = document.querySelector("nav.site-navigation");
  iconMenu.addEventListener("click", () => {
    iconMenuClicked 
      ? navDOM.className = "site-navigation active"
      : navDOM.className = "site-navigation";
    iconMenuClicked = !iconMenuClicked;
  })
</script>

      








<div class="container post-index">

  

<div class="post">
  <h1 class="article-title">
    <span>RxJS å­¦ä¹ ç¬”è®°</span>
  </h1>
  <div class="article-top-meta">
    <span>
      å‘å¸ƒ : 
      2018-08-30
    </span>
    
    
  </div>

  

  <div class="article-content">
    <div class="markdown-body">
      <p></p>
<h1 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h1><p>æœ¬æ–‡ç« ä¸ºå°æ¹¾åŒèƒå†™çš„ <a href="https://ithelp.ithome.com.tw/articles/10186103" target="_blank" rel="noopener">30 å¤©ç²¾é€š RxJS</a> çš„è¯»ä¹¦ç¬”è®°,  å»ºè®®é˜…è¯» <code>30 å¤©ç²¾é€š RxJS</code><a href="https://ithelp.ithome.com.tw/articles/10186103" target="_blank" rel="noopener">(å¢™å¤–åœ°å€)</a>/<a href="https://rxjs-cn.github.io/rxjs5-ultimate-cn/content/hot-n-cold-observables.html" target="_blank" rel="noopener">(gitbookåœ°å€)</a> æ¥å­¦ä¹  <code>RxJS</code></p>
<h1 id="RxJS-ä¸€ä¸ªæ ¸å¿ƒä¸‰ä¸ªé‡ç‚¹"><a href="#RxJS-ä¸€ä¸ªæ ¸å¿ƒä¸‰ä¸ªé‡ç‚¹" class="headerlink" title="RxJS ä¸€ä¸ªæ ¸å¿ƒä¸‰ä¸ªé‡ç‚¹"></a>RxJS ä¸€ä¸ªæ ¸å¿ƒä¸‰ä¸ªé‡ç‚¹</h1><ul>
<li>æ ¸å¿ƒ: <code>Observable</code> å†åŠ ä¸Šç›¸å…³çš„ <code>Operators</code> (<code>map</code>, <code>filter</code>, <code>...</code>)</li>
<li>ä¸‰ä¸ªé‡ç‚¹:<ul>
<li><code>Observer</code>(è§‚å¯Ÿè€…)</li>
<li><code>Subject</code></li>
<li><code>Schedulers</code></li>
</ul>
</li>
</ul>
<h1 id="åè¯è§£é‡Š"><a href="#åè¯è§£é‡Š" class="headerlink" title="åè¯è§£é‡Š"></a>åè¯è§£é‡Š</h1><table>
<thead>
<tr>
<th>åç§°</th>
<th>ä¸­æ–‡</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Observer Pattern</code></td>
<td>è§‚å¯Ÿè€…æ¨¡å¼</td>
<td>DOM çš„äº‹ä»¶ç›‘å¬(<code>addEventListener</code>)</td>
</tr>
<tr>
<td><code>Iterator Pattern</code></td>
<td>è¿­ä»£å™¨æ¨¡å¼</td>
<td>ES6 çš„åŸç”Ÿçš„ <code>Iterator</code></td>
</tr>
<tr>
<td><code>Observable</code></td>
<td>å¯è§‚å¯Ÿå¯¹è±¡</td>
<td><code>Observer Pattern</code> æ˜¯é ç”Ÿäº§è€…æ¨é€èµ„æ–™<br><code>Iterator Pattern</code> åˆ™æ˜¯æ¶ˆè´¹è€…å»è¦æ±‚èµ„æ–™<br>è€Œ <code>Observable</code> æ˜¯è¿™ä¸¤ä¸ªæ€æƒ³çš„ç»“åˆ</td>
</tr>
<tr>
<td><code>Observer</code></td>
<td>è§‚å¯Ÿè€…</td>
<td>æ³¨æ„å’Œ<code>Observer Pattern</code>åŒºåˆ†</td>
</tr>
</tbody>
</table>
<h1 id="Observer"><a href="#Observer" class="headerlink" title="Observer"></a><code>Observer</code></h1><p><strong> <code>Observer</code>(è§‚å¯Ÿè€…) è·Ÿå’Œ <code>Observer Pattern</code>(è§‚å¯Ÿè€…æ¨¡å¼) æ— å…³ï¼Œè§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œæ˜¯æ€è€ƒé—®é¢˜çš„è§£å†³è¿‡ç¨‹ï¼Œè€Œ <code>Observer</code>(è§‚å¯Ÿè€…) æ˜¯ä¸€ä¸ªè¢«å®šä¹‰çš„å¯¹è±¡</strong></p>
<h2 id="ä¸‰ä¸ªæ–¹æ³•"><a href="#ä¸‰ä¸ªæ–¹æ³•" class="headerlink" title="ä¸‰ä¸ªæ–¹æ³•"></a>ä¸‰ä¸ªæ–¹æ³•</h2><ul>
<li>next: æ¯å½“ Observable å‘é€å‡ºæ–°çš„å€¼,next æ–¹æ³•å°±ä¼šè¢«å‘¼å«</li>
<li>complete: åœ¨ Observable æ²¡æœ‰å…¶ä»–çš„èµ„æ–™å¯ä»¥å–å¾—æ—¶,complete æ–¹æ³•å°±ä¼šè¢«å‘¼å«,åœ¨ complete è¢«å‘¼å«ä¹‹å,next æ–¹æ³•å°±ä¸ä¼šå†èµ·ä½œç”¨</li>
<li>error: æ¯å½“ Observable å†…å‘ç”Ÿé”™è¯¯æ—¶,error æ–¹æ³•å°±ä¼šè¢«å‘¼å«</li>
</ul>
<h2 id="å¯Ÿè€…å¯ä»¥æ˜¯ä¸å®Œæ•´çš„ï¼Œå¯ä»¥åªå…·æœ‰ä¸€ä¸ª-next-æ–¹æ³•"><a href="#å¯Ÿè€…å¯ä»¥æ˜¯ä¸å®Œæ•´çš„ï¼Œå¯ä»¥åªå…·æœ‰ä¸€ä¸ª-next-æ–¹æ³•" class="headerlink" title="å¯Ÿè€…å¯ä»¥æ˜¯ä¸å®Œæ•´çš„ï¼Œå¯ä»¥åªå…·æœ‰ä¸€ä¸ª next æ–¹æ³•"></a>å¯Ÿè€…å¯ä»¥æ˜¯ä¸å®Œæ•´çš„ï¼Œå¯ä»¥åªå…·æœ‰ä¸€ä¸ª <code>next</code> æ–¹æ³•</h2><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Observable &#125; <span class="keyword">from</span> <span class="string">'rxjs'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> observable = Observable.create(<span class="function">(<span class="params">observer</span>) =&gt;</span> &#123;</span><br><span class="line">  observer.next(<span class="string">'Jerry'</span>);</span><br><span class="line">  observer.next(<span class="string">'Anna'</span>);</span><br><span class="line">  observer.complete();</span><br><span class="line">  observer.next(<span class="string">'not work'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªè§‚å¯Ÿè€…ï¼Œå…·æœ‰ next, error, complete ä¸Šä¸ªæ–¹æ³•</span></span><br><span class="line"><span class="keyword">let</span> observer = &#123;</span><br><span class="line">  next(value) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(value);</span><br><span class="line">  &#125;,</span><br><span class="line">  error(error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;,</span><br><span class="line">  complete() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'complete'</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">observable.subscribe(observer);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Jerry</span></span><br><span class="line"><span class="comment">Anna</span></span><br><span class="line"><span class="comment">complete</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h1 id="Observable-çš„è®¢é˜…è·Ÿ-addEventListener-çš„å·®å¼‚"><a href="#Observable-çš„è®¢é˜…è·Ÿ-addEventListener-çš„å·®å¼‚" class="headerlink" title="Observable çš„è®¢é˜…è·Ÿ addEventListener çš„å·®å¼‚"></a><code>Observable</code> çš„è®¢é˜…è·Ÿ <code>addEventListener</code> çš„å·®å¼‚</h1><ul>
<li><code>addEventListener</code> æœ¬è´¨ä¸Šå°±æ˜¯ <code>Observer Pattern</code> çš„å®ç°,åœ¨å†…éƒ¨ä¼šæœ‰ä¸€ä»½è®¢é˜…æ¸…å•</li>
<li><code>Observable</code> çš„è®¢é˜… æ¯”è¾ƒåƒæ˜¯æ‰§è¡Œä¸€ä¸ªç‰©ä»¶çš„æ–¹æ³•,å¹¶æŠŠèµ„æ–™ä¼ è¿›è¿™ä¸ªæ–¹æ³•ä¸­</li>
</ul>
<h1 id="Observable-å’Œ-Iterator-çš„å·®å¼‚"><a href="#Observable-å’Œ-Iterator-çš„å·®å¼‚" class="headerlink" title="Observable å’Œ Iterator çš„å·®å¼‚"></a><code>Observable</code> å’Œ <code>Iterator</code> çš„å·®å¼‚</h1><ul>
<li>å»¶è¿Ÿè¿ç®—</li>
<li>æ¸è¿›å¼å–å€¼</li>
</ul>
<h1 id="Observable-çš„-static-function"><a href="#Observable-çš„-static-function" class="headerlink" title="Observable çš„ static function"></a>Observable çš„ <code>static function</code></h1><ul>
<li><code>Observable.create</code> ä¼ å…¥ä¸€ä¸ª<code>callback function</code>, è¿™ä¸ª <code>callback function</code> ä¼šæ¥æ”¶ä¸€ä¸ª<code>observer</code> å‚æ•°</li>
<li><code>Observable.throw</code> åˆ›å»ºä¸€ä¸ªä¸å‘é€æ•°æ®ç»™è§‚å¯Ÿè€…å¹¶ä¸”ç«‹é©¬å‘å‡ºé”™è¯¯é€šçŸ¥çš„ <code>Observable</code></li>
<li><code>Observable.pipe</code> å°†ä¸€ç³»åˆ—çš„æ“ä½œå‡½æ•° å˜æˆ <code>chain</code> çš„æ–¹å¼</li>
</ul>
<h1 id="åˆ›å»ºå®ä¾‹"><a href="#åˆ›å»ºå®ä¾‹" class="headerlink" title="åˆ›å»ºå®ä¾‹"></a>åˆ›å»ºå®ä¾‹</h1><p><strong><code>import { of, from, fromEvent } from &#39;rxjs&#39;</code></strong></p>
<ul>
<li>of</li>
<li>from</li>
<li>fromEvent</li>
<li>fromEventPattern (<em>åŒæ—¶å…·æœ‰æ³¨å†Œç›‘å¬åŠç§»é™¤ç›‘å¬ä¸¤ç§è¡Œä¸º</em>)</li>
<li>fromPromise</li>
<li>never (<em>ä¸€ç›´å­˜åœ¨ä½†å´ä»€ä¹ˆéƒ½ä¸åšçš„ observable</em>)</li>
<li>empty (<em>ç«‹å³é€å‡º complete</em>)</li>
<li>throw (<em>ç«‹å³æŠ›å‡ºé”™è¯¯</em>)</li>
<li>interval (<em>æ¯éš” X æ¯«ç§’é€å‡ºä¸€ä¸ªä»é›¶å¼€å§‹é€’å¢çš„æ•´æ•°</em>)</li>
<li>timer (<em>ç¬¬ä¸€ä¸ªå‚æ•°è¦å‘å‡ºç¬¬ä¸€ä¸ªå€¼çš„ç­‰å¾…æ—¶é—´(ms)ï¼Œç¬¬äºŒä¸ªå‚æ•°ç¬¬ä¸€æ¬¡ä¹‹åå‘é€å€¼çš„é—´éš”æ—¶é—´</em>) | (<em>ç¬¬ä¸€ä¸ªå‚æ•°æ—¥æœŸ(Date)ç­‰åˆ°æŒ‡å®šçš„æ—¶é—´åœ¨å‘é€ç¬¬ä¸€ä¸ªå€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°ç¬¬ä¸€æ¬¡ä¹‹åå‘é€å€¼çš„é—´éš”æ—¶é—´</em>) | (<em>åªæ¥æ”¶ä¸€ä¸ªå‚æ•°, ç­‰å¾…ç¬¬ä¸€ä¸ªå‚æ•°æ—¶å€™åé€šçŸ¥ç»“æŸ</em>)</li>
</ul>
<h1 id="è®¢é˜…"><a href="#è®¢é˜…" class="headerlink" title="è®¢é˜…"></a>è®¢é˜…</h1><ul>
<li>è®¢é˜… <code>observable</code> åï¼Œä¼šå›ä¼ ä¸€ä¸ª <code>subscription</code> ç‰©ä»¶ï¼Œè¿™ä¸ªç‰©ä»¶å…·æœ‰é‡Šæ”¾èµ„æºçš„<code>unsubscribe</code>æ–¹æ³•</li>
<li><code>Events observable</code> å°½é‡ä¸è¦ç”¨ <code>unsubscribe</code>ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šä½¿ç”¨ <code>takeUntil</code>ï¼Œåœ¨æŸä¸ªäº‹ä»¶å‘ç”Ÿåæ¥å®Œæˆ <code>Event observable</code></li>
</ul>
<h1 id="operators"><a href="#operators" class="headerlink" title="operators"></a>operators</h1><p><strong><a href="http://rxmarbles.com/" target="_blank" rel="noopener">ç å®å›¾ http://rxmarbles.com/</a></strong></p>
<p><strong>!!! æ¯ä¸ª operator éƒ½ä¼šå›ä¼ ä¸€ä¸ªæ–°çš„ observable</strong></p>
<ul>
<li>map</li>
<li>mapTo</li>
<li>filter</li>
<li>take</li>
<li>first</li>
<li>takeUntil</li>
<li>skip</li>
<li>takeLast å¿…é¡»ç­‰åˆ°æ•´ä¸ª<code>observable</code>å®Œæˆ(complete)ï¼Œæ‰èƒ½çŸ¥é“æœ€åçš„å…ƒç´ æœ‰å“ªäº›ï¼Œå¹¶ä¸”<strong>åŒæ­¥é€å‡º</strong></li>
<li>last</li>
<li>concat æŠŠå¤šä¸ª <code>observable</code> å®ä¾‹åˆå¹¶æˆä¸€ä¸ª, ç­‰å‰ä¸€ä¸ª <code>observable</code>å®Œæˆ,æ‰ä¼šç»§ç»­ä¸‹ä¸€ä¸ª</li>
<li>startWith ä¸€å¼€å§‹å°±<strong>åŒæ­¥</strong>å‘å‡ºçš„ï¼Œè¿™ä¸ª<code>operator</code>å¸¸è¢«ç”¨æ¥ä¿å­˜ç¨‹å¼çš„èµ·å§‹çŠ¶æ€</li>
<li>merge æŠŠå¤šä¸ª <code>observable</code> å®ä¾‹åˆå¹¶æˆä¸€ä¸ª, å¤šä¸ª <code>observable</code> åŒæ—¶å¤„ç†</li>
<li>combineLatest å–å¾—å„ä¸ª <code>observable</code> æœ€åé€å‡ºçš„å€¼ï¼Œå†è¾“å‡ºæˆä¸€ä¸ªå€¼</li>
<li>zip&lt;T, R&gt;(â€¦observables: Array&lt;ObservableInput<any> | ((â€¦values: Array<any>) =&gt; R)&gt;): Observable<r><br>æ¯ä¸ª <code>observable</code> çš„ç¬¬ n ä¸ªå…ƒç´ ä¼šä¸€èµ·è¾“å‡º</r></any></any></li>
<li>withLatestFrom&lt;T, R&gt;(â€¦args: Array&lt;ObservableInput<any> | ((â€¦values: Array<any>) =&gt; R)&gt;): OperatorFunction&lt;T, R&gt;<br>å’Œ <code>combineLatest</code> åƒ, åªæœ‰åœ¨ä¸»<code>observable</code> é€å‡ºæ–°çš„å€¼æ—¶ï¼Œæ‰ä¼šæ‰§è¡Œ callback</any></any></li>
<li>reduce&lt;T, R&gt;(accumulator: (acc: R, value: T, index?: number) =&gt; R, seed?: R): OperatorFunction&lt;T, R&gt;<br>è¿”å›ä¸€ä¸ª<code>reduce</code>ä¹‹åçš„æœ€ç»ˆç»“æœ</li>
<li>scan&lt;T, R&gt;(accumulator: (acc: R, value: T, index: number) =&gt; R, seed?: T | R): OperatorFunction&lt;T, R&gt;<br> å’Œ<code>reduce</code> ç›¸ä¼¼,  ä½†æ˜¯  è¿”å›æ¯ä¸ªä¸­é—´ç»“æœ</li>
<li>buffer<t>(closingNotifier: Observable<any>): OperatorFunction&lt;T, T[]&gt;<br>ç¼“å†²æº Observable çš„å€¼ç›´åˆ° closingNotifier å‘å‡º</any></t></li>
<li>bufferTime<t>(bufferTimeSpan: number): OperatorFunction&lt;T, T[]&gt;<br>åœ¨ç‰¹å®šæ—¶é—´å‘¨æœŸå†…ç¼“å†²æº Observable çš„å€¼</t></li>
<li>bufferCount<t>(bufferSize: number, startBufferEvery: number = null): OperatorFunction&lt;T, T[]&gt;<br>ç¼“å†²æº Observable çš„å€¼ç›´åˆ°ç¼“å†²æ•°é‡åˆ°è¾¾è®¾å®šçš„ bufferSize.</t></li>
<li>delay</li>
<li>delayWhen</li>
<li>debounce æ¯æ¬¡æ”¶åˆ°å…ƒç´ ï¼Œä»–ä¼šå…ˆæŠŠå…ƒç´  cache ä½å¹¶ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå¦‚æœè¿™æ®µæ—¶é—´å†…å·²ç»æ²¡æœ‰æ”¶åˆ°ä»»ä½•å…ƒç´ ï¼Œåˆ™æŠŠå…ƒç´ é€å‡ºï¼›å¦‚æœè¿™æ®µæ—¶é—´å†…åˆæ”¶åˆ°æ–°çš„å…ƒç´ ï¼Œåˆ™ä¼šæŠŠåŸæœ¬ cache ä½çš„å…ƒç´ é‡Šæ”¾æ‰å¹¶é‡æ–°è®¡æ—¶ï¼Œä¸æ–­åè¦†</li>
<li>debounceTime</li>
<li>throttle æœ‰å…ƒç´ è¢«é€å‡ºå°±ä¼šæ²‰é»˜ä¸€æ®µæ—¶é—´ï¼Œç­‰åˆ°æ—¶é—´è¿‡äº†åˆä¼šå¼€æ”¾å‘é€å…ƒç´ </li>
<li>throttleTime</li>
<li>distinct&lt;T, K&gt;(keySelector?: (value: T) =&gt; K, flushes?: Observable<any>): MonoTypeOperatorFunction<t><br>ä¸è¦ç›´æ¥æŠŠ<code>distinct</code>ç”¨åœ¨ä¸€ä¸ªæ— é™çš„<code>observable</code>é‡Œï¼Œè¿™æ ·å¾ˆå¯èƒ½ä¼šè®© Set è¶Šæ¥è¶Šå¤§</t></any></li>
<li>distinctUntilChanged</li>
<li>catchError&lt;T, R&gt;(selector: (err: any, caught: Observable<t>) =&gt; ObservableInput<r>): OperatorFunction&lt;T, T | R&gt;</r></t></li>
<li>retry</li>
<li>retryWhen</li>
<li>repeat</li>
<li>concatAll <code>source</code> observable å†…éƒ¨æ¯æ¬¡å‘é€çš„å€¼ä¹Ÿæ˜¯<code>observable</code>ï¼Œç”¨ <code>concatAll</code> å°±å¯ä»¥æŠŠ <code>source</code> æ‘Šå¹³; ä¼šå¤„ç† <code>source</code> å…ˆå‘å‡ºæ¥çš„ <code>observable</code>ï¼Œå¿…é¡»ç­‰åˆ°è¿™ä¸ª <code>observable</code> ç»“æŸï¼Œæ‰ä¼šå†å¤„ç†ä¸‹ä¸€ä¸ª<code>source</code>å‘å‡ºæ¥çš„<code>observable</code></li>
<li>switchAll<t>(): OperatorFunction&lt;ObservableInput<t>, T&gt;<br>æ¯å½“æœ‰æ–°çš„ observable é€å‡ºå°±ä¼šç›´æ¥æŠŠæ—§çš„ observable é€€è®¢(unsubscribe)ï¼Œæ°¸è¿œåªå¤„ç†æœ€æ–°çš„ observable!</t></t></li>
<li>mergeAll<t>(concurrent: number = Number.POSITIVE_INFINITY): MonoTypeOperatorFunction<t></t></t></li>
<li>concatMap&lt;T, I, R&gt;(project: (value: T, index: number) =&gt; ObservableInput<i>, resultSelector?: (outerValue: T, innerValue: I, outerIndex: number, innerIndex: number) =&gt; R): OperatorFunction&lt;T, I | R&gt;<br><code>map + concatAll</code><br>ç¡®å®šå†…éƒ¨çš„ observable ç»“æŸæ—¶é—´æ¯”å¤–éƒ¨ observable å‘é€æ—¶é—´æ¥å¿«çš„æƒ…å¢ƒï¼Œå¹¶ä¸”ä¸å¸Œæœ›æœ‰ä»»ä½•å¹¶è¡Œå¤„ç†è¡Œä¸ºï¼Œé€‚åˆå°‘æ•°è¦ä¸€æ¬¡ä¸€æ¬¡å®Œæˆåˆ°åº•çš„çš„ UI åŠ¨ç”»æˆ–ç‰¹åˆ«çš„ HTTP request è¡Œä¸º</i></li>
<li>switchMap&lt;T, I, R&gt;(project: (value: T, index: number) =&gt; ObservableInput<i>, resultSelector?: (outerValue: T, innerValue: I, outerIndex: number, innerIndex: number) =&gt; R): OperatorFunction&lt;T, I | R&gt;<br><code>map + switchAll</code><br>åªè¦æœ€åä¸€æ¬¡è¡Œä¸ºçš„ç»“æœï¼Œé€‚åˆç»å¤§å¤šæ•°çš„ä½¿ç”¨æƒ…å¢ƒ</i></li>
<li>mergeMap&lt;T, I, R&gt;(project: (value: T, index: number) =&gt; ObservableInput<i>, resultSelector?: ((outerValue: T, innerValue: I, outerIndex: number, innerIndex: number) =&gt; R) | number, concurrent: number = Number.POSITIVE_INFINITY): OperatorFunction&lt;T, I | R&gt;<br><code>map + mergeAll</code><br>å¹¶è¡Œå¤„ç†å¤šä¸ª observableï¼Œé€‚åˆéœ€è¦å¹¶è¡Œå¤„ç†çš„è¡Œä¸ºï¼Œåƒæ˜¯å¤šä¸ª I/O çš„å¹¶è¡Œå¤„ç†</i></li>
<li>window<t>(windowBoundaries: Observable<any>): OperatorFunction&lt;T, Observable<t>&gt;<br>æ¯å½“ windowBoundaries å‘å‡ºé¡¹æ—¶ï¼Œå°†æº Observable çš„å€¼åˆ†æ”¯æˆåµŒå¥—çš„ Observable</t></any></t></li>
<li>windowToggle&lt;T, O&gt;(openings: Observable<o>, closingSelector: (openValue: O) =&gt; Observable<any>): OperatorFunction&lt;T, Observable<t>&gt;<br>å°†æº Observable çš„å€¼åˆ†æ”¯æˆåµŒå¥—çš„ Observableï¼Œåˆ†æ”¯ç­–ç•¥æ˜¯ä»¥ openings å‘å‡ºé¡¹ä¸ºèµ·å§‹ï¼Œä»¥ closingSelector å‘å‡ºä¸ºç»“æŸ</t></any></o></li>
<li>groupBy&lt;T, K, R&gt;(keySelector: (value: T) =&gt; K, elementSelector?: ((value: T) =&gt; R) | void, durationSelector?: (grouped: GroupedObservable&lt;K, R&gt;) =&gt; Observable<any>, subjectSelector?: () =&gt; Subject<r>): OperatorFunction&lt;T, GroupedObservable&lt;K, R&gt;&gt;<br>æ ¹æ®æŒ‡å®šæ¡ä»¶å°†æº Observable å‘å‡ºçš„å€¼è¿›è¡Œåˆ†ç»„ï¼Œå¹¶å°†è¿™äº›åˆ†ç»„ä½œä¸º GroupedObservables å‘å‡ºï¼Œæ¯ä¸€ä¸ªåˆ†ç»„éƒ½æ˜¯ä¸€ä¸ª GroupedObservable</r></any></li>
</ul>
<h1 id="Subject"><a href="#Subject" class="headerlink" title="Subject"></a>Subject</h1><ul>
<li><code>Subject</code> åŒæ—¶æ˜¯ <code>Observable</code> åˆæ˜¯ <code>Observer</code></li>
<li><code>Subject</code> ä¼šå¯¹å†…éƒ¨çš„ observers æ¸…å•è¿›è¡Œç»„æ’­(<code>multicast</code>)</li>
<li><code>Subject</code> å°±æ˜¯ <code>Observer Pattern</code> çš„å®ä½œå¹¶ä¸”ç»§æ‰¿è‡ª <code>Observable</code></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; Subject &#125; <span class="keyword">from</span> <span class="string">'rxjs'</span>;</span><br><span class="line"><span class="keyword">let</span> subject = <span class="keyword">new</span> Subject();</span><br><span class="line">subject.subscribe(observerA); <span class="comment">// ç›¸å½“äº æŠŠ observerA åŠ å…¥è®¢é˜…æ¸…å•</span></span><br><span class="line">source.subscribe(subject); <span class="comment">//  éå†è®¢é˜…æ¸…å•åå‘é€å½“å‰æ•°æ®</span></span><br></pre></td></tr></table></figure>
<h2 id="BehaviorSubject"><a href="#BehaviorSubject" class="headerlink" title="BehaviorSubject"></a>BehaviorSubject</h2><p>ä¸€ç§ <code>subject</code> èƒ½å¤Ÿè¡¨è¾¾å½“å‰çš„çŠ¶æ€,åœ¨ä¸€è®¢é˜…æ—¶å°±èƒ½æ”¶åˆ°æœ€æ–°çš„çŠ¶æ€æ˜¯ä»€ä¹ˆ,è€Œä¸æ˜¯è®¢é˜…åè¦ç­‰åˆ°æœ‰å˜åŠ¨æ‰èƒ½æ¥æ”¶åˆ°æ–°çš„çŠ¶æ€</p>
<h2 id="ReplaySubject"><a href="#ReplaySubject" class="headerlink" title="ReplaySubject"></a>ReplaySubject</h2><p>äº‹ä»¶çš„é‡æ”¾, åœ¨æ–°è®¢é˜…æ—¶é‡æ–°å‘é€æœ€åçš„å‡ ä¸ªå…ƒç´ </p>
<h2 id="AsyncSubject"><a href="#AsyncSubject" class="headerlink" title="AsyncSubject"></a>AsyncSubject</h2><p>ç­‰åˆ°äº‹æƒ…ç»“æŸåé€å‡ºä¸€ä¸ªå€¼</p>
<h2 id="å’Œ-Subject-ç›¸å…³çš„-Observable-operators"><a href="#å’Œ-Subject-ç›¸å…³çš„-Observable-operators" class="headerlink" title="å’Œ Subject ç›¸å…³çš„ Observable.operators"></a>å’Œ Subject ç›¸å…³çš„ Observable.operators</h2><ul>
<li>multicast&lt;T, R&gt;(subjectOrSubjectFactory: Subject<t> | (() =&gt; Subject<t>), selector?: (source: Observable<t>) =&gt; Observable<r>): OperatorFunction&lt;T, R&gt;<br>å¯ä»¥ç”¨æ¥æŒ‚è½½ <code>subject</code> å¹¶å›ä¼ ä¸€ä¸ªå¯è¿ç»“(<code>connectable</code>)çš„ <code>observable</code></r></t></t></t></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> source = Observable.multicast(<span class="keyword">new</span> Subject());</span><br><span class="line">source.subscribe(observerA);</span><br><span class="line"><span class="keyword">let</span> realSubscription = source.connect();</span><br><span class="line">realSubscription.unsubscribe();</span><br></pre></td></tr></table></figure>
<ul>
<li>refCount<t>(): MonoTypeOperatorFunction<t><br>å»ºç«‹ä¸€ä¸ªåªè¦æœ‰è®¢é˜…å°±ä¼šè‡ªåŠ¨ <code>connect</code> çš„ <code>observable</code>, å¿…é¡»å’Œ <code>multicast</code> ä¸€èµ·ä½¿ç”¨</t></t></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> source = Observable.multicast(<span class="keyword">new</span> Subject()).refCount();</span><br><span class="line"><span class="keyword">let</span> subscription = source.subscribe(observerA);</span><br><span class="line">subscription.unsubscribe();</span><br></pre></td></tr></table></figure>
<ul>
<li>publish&lt;T, R&gt;(selector?: OperatorFunction&lt;T, R&gt;): MonoTypeOperatorFunction<t> | OperatorFunction&lt;T, R&gt;<br>ç®€åŒ– <code>multicast(new Subject())</code></t></li>
</ul>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> source = Observable.publish().refCount();</span><br><span class="line"><span class="keyword">let</span> subscription = source.subscribe(observerA);</span><br><span class="line">subscription.unsubscribe();</span><br></pre></td></tr></table></figure>
<ul>
<li><p>publishReplay<br><code>multicast(new ReplaySubject(1))</code></p>
</li>
<li><p>publishBehavior(0)<br><code>multicast(new BehaviorSubject(0))</code></p>
</li>
<li><p>publishLast<br><code>multicast(new AsyncSubject())</code></p>
</li>
<li><p>share<br><code>.publish().refCount();</code></p>
</li>
</ul>
<h1 id="Scheduler"><a href="#Scheduler" class="headerlink" title="Scheduler"></a>Scheduler</h1><ul>
<li><code>Scheduler</code> æ˜¯ä¸€ä¸ªèµ„æ–™ç»“æ„.å®ƒçŸ¥é“å¦‚ä½•æ ¹æ®ä¼˜å…ˆçº§æˆ–å…¶ä»–æ ‡å‡†æ¥å‚¨å­˜å¹¶ä¼«åˆ—ä»»åŠ¡.</li>
<li><code>Scheduler</code> æ˜¯ä¸€ä¸ªæ‰§è¡Œç¯å¢ƒ.å®ƒæ„å‘³ç€ä»»åŠ¡ä½•æ—¶ä½•åœ°è¢«æ‰§è¡Œï¼Œæ¯”å¦‚åƒæ˜¯ç«‹å³æ‰§è¡Œã€åœ¨å›å‘¼(callback)ä¸­æ‰§è¡Œã€setTimeout ä¸­æ‰§è¡Œã€animation frame ä¸­æ‰§è¡Œ</li>
<li><code>Scheduler</code> æ˜¯ä¸€ä¸ªè™šæ‹Ÿæ—¶é’Ÿ.å®ƒé€è¿‡ now()è¿™ä¸ªæ–¹æ³•æä¾›äº†æ—¶é—´çš„æ¦‚å¿µï¼Œæˆ‘ä»¬å¯ä»¥è®©ä»»åŠ¡åœ¨ç‰¹å®šçš„æ—¶é—´ç‚¹è¢«æ‰§è¡Œ.</li>
</ul>
<h2 id="queue"><a href="#queue" class="headerlink" title="queue"></a>queue</h2><p>åœ¨ä¼šæœ‰é€’å›çš„ operator ä¸”å…·æœ‰å¤§é‡èµ„æ–™æ—¶ä½¿ç”¨ï¼Œåœ¨è¿™ä¸ªæƒ…å†µä¸‹ queue èƒ½é¿å…ä¸å¿…è¦çš„æ•ˆèƒ½æŸè€—</p>
<h2 id="asap"><a href="#asap" class="headerlink" title="asap"></a>asap</h2><p>asap å› ä¸ºéƒ½æ˜¯åœ¨ setTimeout ä¸­æ‰§è¡Œï¼Œæ‰€ä»¥ä¸ä¼šæœ‰ block event loop çš„é—®é¢˜ï¼Œå¾ˆé€‚åˆç”¨åœ¨æ°¸è¿œä¸ä¼šé€€è®¢çš„ observableï¼Œä¾‹å¦‚åœ¨èƒŒæ™¯ä¸‹æŒç»­ç›‘å¬ server é€æ¥çš„é€šçŸ¥</p>
<h2 id="async"><a href="#async" class="headerlink" title="async"></a>async</h2><p>asap å¾ˆåƒä½†æ˜¯ä½¿ç”¨ setInterval æ¥è¿ä½œï¼Œé€šå¸¸æ˜¯è·Ÿæ—¶é—´ç›¸å…³çš„ operator æ‰ä¼šç”¨åˆ°</p>
<h2 id="animationFrame"><a href="#animationFrame" class="headerlink" title="animationFrame"></a>animationFrame</h2><p>åœ¨åšå¤æ‚è¿ç®—ï¼Œä¸”é«˜é¢‘ç‡è§¦å‘çš„ UI åŠ¨ç”»æ—¶ï¼Œå°±å¾ˆé€‚åˆä½¿ç”¨ animationFrameï¼Œä»¥å¯ä»¥æ­é… throttle operator ä½¿ç”¨ã€‚</p>
<h1 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h1><ul>
<li><a href="https://ithelp.ithome.com.tw/articles/10186103" target="_blank" rel="noopener">30 å¤©ç²¾é€š RxJS</a>  </li>
<li><a href="https://rxjs-cn.github.io/rxjs5-ultimate-cn/content/hot-n-cold-observables.html" target="_blank" rel="noopener">30-days-proficient-in-rxjs</a><br><br></li>
</ul>
<hr>
<blockquote>
<p><strong>æ–‡ç« è‹¥æœ‰çº°æ¼è¯·å¤§å®¶è¡¥å……æŒ‡æ­£,è°¢è°¢~~</strong></p>
</blockquote>
<blockquote>
<p><a href="http://blog.xinshangshangxin.com">http://blog.xinshangshangxin.com</a> SHANG æ®‡</p>
</blockquote>
    </div>
  </div>
  
  
  
    <div class="social-share" style="margin-top: -2rem" data-wechat-qrcode-title="<p>å¾®ä¿¡æ‰«ä¸€æ‰«</p>" data-wechat-qrcode-helper="<p>å¾®ä¿¡å³ä¸Šè§’, æ‰«ä¸€æ‰«åˆ†äº«</p>" data-sites="google, facebook, twitter, wechat, qzone, qq, weibo, douban">
  <span style="color: #6b7487; font-size: 1.4rem;">åˆ†äº«åˆ°: </span>
</div>
<script src="https://cdn.bootcss.com/social-share.js/1.0.16/js/social-share.min.js" async></script>
  

  

  <div class="article-footer">
    <div class="article-meta pull-left">
      <span>
        
          <i class="iconfont icon-06tags"></i>æ ‡ç­¾: 
          
          <span class="span--tag">
            <a href="/tags/js/">
              #js
            </a>
          </span>
          
          <span class="span--tag">
            <a href="/tags/rxjs/">
              #rxjs
            </a>
          </span>
          
          <span class="span--tag">
            <a href="/tags/RxJS/">
              #RxJS
            </a>
          </span>
          
        
      </span>
    </div>
    <div class="article-meta pull-right">
    </div>
  </div>
</div>


  <aside id="sidebar">
    <p id="sidebar-header"></p>
    <ol id="sidebar-toc"></ol>
  </aside>
  <script async>setTimeout(generateToc, 10);</script>


  <nav class="post-navigation">
    
      <div class="nav-pre">
        <i class="iconfont icon-prev"></i>
        ä¸Šä¸€ç¯‡:
        <a href="/2018/07/21/gitlab-ci-artifacts-cache/" target="_self">GitLab CI ä¸­ cache å’Œ artifacts çš„åŒºåˆ«</a>
      </div>
    
    
      <div class="nav-next">
        ä¸‹ä¸€ç¯‡:
        <a href="/2018/08/31/dash-rxjs-6/" target="_self">RxJS v6 dash æ–‡æ¡£</a>
        <i class="iconfont icon-next"></i>
      </div>
    
  </nav>

   

   

</div>


      <footer>
  <p class="site-info">
    <!-- åšå®¢å·²èŒèŒå“’è¿è¡Œ<span id="time-to-now"></span><span class="my-face">(â—'â—¡'â—)ï¾‰â™¥</span> -->
    
      å¾—ä¹‹æˆ‘å¹¸,å¤±ä¹‹æˆ‘å‘½
    
    <br>
    Theme - <a href="https://github.com/dongyuanxin/theme-bmw">BMW</a> | Made With ğŸ’— | Powered by <a href="https://godbmw.com/">GodBMW</a>
    <br>
    
  </p>
</footer>



<script>
const timeToNowDOM = document.querySelector("#time-to-now");
const startTimestamp = new Date(2018, 1, 10).getTime();

const updateTimeStr = () => {
  let offset = parseInt(
      (new Date().getTime() - startTimestamp) / 1000,
      10
    ),
    day = Math.floor(offset / 86400),
    hour = Math.floor((offset % 86400) / 3600),
    minute = Math.floor(((offset % 86400) % 3600) / 60),
    second = Math.floor(((offset % 86400) % 3600) % 60);
  timeToNowDOM.innerHTML =
    day + "å¤©" + hour + "å°æ—¶" + minute + "åˆ†é’Ÿ" + second + "ç§’";
  setTimeout(updateTimeStr, 500);
}

setTimeout(updateTimeStr, 500);
</script>


      <div class="back-to-top hidden">
  <span>
    <i class="iconfont icon-60"></i><span></span>%
  </span>
</div>

<script>
const updateIconToTop = percent => {
  let dom = document.querySelector(".back-to-top span span");
  dom.innerText = percent;
  if(percent < 1) {
    document.querySelector(".back-to-top").className = "back-to-top hidden";
  } else {
    document.querySelector(".back-to-top").className = "back-to-top";
  }
}

const handleScoll = () => {
  let isRunning = false;
  return () => {
    if (isRunning) return;
    isRunning = true;
    window.requestAnimationFrame(timestamp => {
      let scrollTop =
          document.documentElement.scrollTop || document.body.scrollTop,
        scrollHeight =
          document.documentElement.scrollHeight ||
          document.body.scrollHeight,
        clientHeight =
          document.documentElement.clientHeight ||
          document.body.clientHeight;
      isRunning = false;
      if (scrollTop <= 1) {
        updateIconToTop(0);
        return;
      }
      if (scrollTop + clientHeight >= scrollHeight) {
        updateIconToTop(100);
      } else {
        updateIconToTop(parseInt(
          100 * scrollTop / (scrollHeight - clientHeight),
          10
        ));
      }
    });
  };
}

const backToTop = () => {
  let scrollTop =
      document.documentElement.scrollTop || document.body.scrollTop,
    delay = 10,
    time = 200;
  if (scrollTop <= 20) {
    document.documentElement.scrollTop = 0;
    document.body.scrollTop = 0;
    return;
  }
  let step = Math.ceil(scrollTop * delay / time);
  let timer = setInterval(() => {
    scrollTop =
      document.documentElement.scrollTop || document.body.scrollTop;
    if (scrollTop - step <= 0) {
      document.documentElement.scrollTop = 0;
      document.body.scrollTop = 0;
      clearInterval(timer);
    } else {
      document.documentElement.scrollTop = scrollTop - step;
      document.body.scrollTop = scrollTop - step;
    }
  }, delay);
}

document.addEventListener("scroll", handleScoll(), false);

document.querySelector(".back-to-top").addEventListener("click", backToTop, false);

</script>

    </div>

    
      <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" async></script>
<script>
  (() => {
    const mathjaxConfig = {
      showProcessingMessages: false, //å…³é—­jsåŠ è½½è¿‡ç¨‹ä¿¡æ¯
      messageStyle: "none", //ä¸æ˜¾ç¤ºä¿¡æ¯
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [["$", "$"], ["\\(", "\\)"]], //è¡Œå†…å…¬å¼é€‰æ‹©ç¬¦
        displayMath: [["$$", "$$"], ["\\[", "\\]"]], //æ®µå†…å…¬å¼é€‰æ‹©ç¬¦
        skipTags: ["script", "noscript", "style", "textarea", "pre", "code", "a"] //é¿å¼€æŸäº›æ ‡ç­¾
      },
      "HTML-CSS": {
        availableFonts: ["STIX", "TeX"], //å¯é€‰å­—ä½“
        showMathMenu: false //å…³é—­å³å‡»èœå•æ˜¾ç¤º
      }
    }

    let mathjaxInterval = setInterval(() => {
      if(!window.MathJax){
        return;
      }
      window.MathJax.Hub.Config(mathjaxConfig)
      window.MathJax.Hub.Queue(["Typeset", MathJax.Hub, document.getElementById('app')])

      clearInterval(mathjaxInterval)
    }, 10)    
  })()
</script>
    

    <script src="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.js" async></script>
<script async>
  let fancyTimer = setInterval(function(){
    if(!window.$){
      return;
    }
    $(document).ready(function() {
      $(".post img").each(function () {
        if($(this).parent().get(0).tagName.toLowerCase() === "a") {
          return;
        }
        // $(this).attr("data-fancybox", "gallery"); // if you add 'data-fancybox', img will display after showed
        var element = document.createElement("a");
        $(element).attr("data-fancybox", "gallery");
        $(element).attr("href", $(this).attr("src"));
        $(this).wrap(element);
      });
      
      clearInterval(fancyTimer);
    });
  }, 10);
</script>

    
  </body>

</html>
