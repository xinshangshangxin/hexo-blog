<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>

    <!-- https://github.com/jakesgordon/javascript-state-machine -->
    <script src="http://upload.xinshangshangxin.com/state-machine-2.3.5.min.js"></script>
    <script>
        var fsm = StateMachine.create({
            initial: 'off',
            events: [
                {name: 'buttonWasPressed', from: 'off', to: 'on'},
                {name: 'buttonWasPressed', from: 'on', to: 'off'}
            ],
            callbacks: {
                onbuttonWasPressed: function(event, from, to, msg) {
                    console.log(arguments);
                }
            },
            error: function(eventName, from, to, args, errorCode, errorMessage) {
                console.log(arguments); // 从一种状态试图切换到一种不可能的到达的状态的时候
            }
        });

        var button = document.createElement('button');
        button.innerHTML = 'test';
        button = document.body.appendChild(button);
        button.onclick = function() {
            fsm.buttonWasPressed();
        };
    </script>

</body>
</html>